<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>



<style>
body {
    background-color: rgb(233, 233, 233);
    padding-top: 3%;
    padding-left: 15%;
    padding-right: 15%;
    height: 3000;
    
    }

.picture {
    padding-left: 9%;
}

.diagram {
    padding-top: 20px;
    width: 90%;
    align-content: center;
}

.paragraph {
    margin-top: 70px;
    margin-bottom: 30px;
    margin-left: 100px;
    margin-right: 100px;
    display: grid;
    grid-template-columns: auto auto;
    grid-gap: 80px;
    font-family:'Times New Roman', Times, serif;
    line-height: 25px;
}

.divider-line {
    background-color: black;
    width: 100%;
    height: 1px;
}

.barchart {
    margin-top: 40px;
    margin-left: 30px;
}

.grid-container-2 {
    margin-top: 0px;
    margin-left: 30px;
	width: 100%;
	display: grid;
	grid-template-columns: auto auto;
	grid-gap: 10px;
	
}

.text {
    margin-top: 6%;
    margin-left: 80px;
    width: 350px;
    line-height: 25px;
}



.embed-container {position: relative; padding-bottom: 64%; height: 0; max-width: 100%;} 
.embed-container iframe, .embed-container object, .embed-container iframe{position: absolute; top: 0; left: 0; width: 100%; height: 100%;} small{position: absolute; z-index: 40; bottom: 0; margin-bottom: -15px;}
</style>

<body>
    
    <div class="embed-container">
    <iframe width="940" height="600" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" title="City of Millennial" src="//www.arcgis.com/apps/Embed/index.html?webmap=301ad099d619472c8e66aa32b9de0b52&extent=-71.3327,42.2015,-70.8298,42.4023&home=true&zoom=true&previewImage=false&scale=true&search=true&searchextent=true&legendlayers=true&disable_scroll=false&theme=light">
    </iframe>
    </div>

    
       
    <!-- Add 2 buttons -->
    <button class=barchart onclick="update('var1')">Student</button>
    <button class=barchart onclick="update('var2')">Family Household</button>

    <div class="grid-container-2">

        <div id="my_dataviz"></div>

        <div>
                <p class=text>
                We quantified the sensing power of a taxi fleet to cover a city’s street segments during a day. The prediction of our model agrees with empirical data from Singapore, Chicago, San Francisco, New York, Vienna, and Shanghai, showing that a drive-by sensing solution might be applied globally. We quantified the sensing power of a taxi fleet to cover a city’s street segments during a day. The prediction of our model agrees with empirical data from Singapore, Chicago, San Francisco, New York, Vienna, and Shanghai, showing that a drive-by sensing solution might be applied globally.
                </p>    
        </div>   

    </div>

    
    <div class="divider-line"></div>

    <section class=picture>

        <img class=diagram src="images/Student Census Density 0.082.jpg" alt="census density mapping">
      
    </section>

    <section class=paragraph>
            <div class>
                <p>
                We quantified the sensing power of a taxi fleet to cover a city’s street segments during a day. The prediction of our model agrees with empirical data from Singapore, Chicago, San Francisco, New York, Vienna, and Shanghai, showing that a drive-by sensing solution might be applied globally.
                </p>
            </div>
            <div>
                <p class>
                We quantified the sensing power of a taxi fleet to cover a city’s street segments during a day. The prediction of our model agrees with empirical data from Singapore, Chicago, San Francisco, New York, Vienna, and Shanghai, showing that a drive-by sensing solution might be applied globally.
                </p>    
            </div>

    </section>

    <section class=picture>

            <img class=diagram src="images/Density Alluvial.png"  alt="alluvial diagram">

    </section>

    <script>

            // set the dimensions and margins of the graph
            var margin = {top: 30, right: 30, bottom: 70, left: 60},
                width = 460 - margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;
            
            // append the svg object to the body of the page
            var svg = d3.select("#my_dataviz")
              .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
              .append("g")
                .attr("transform",
                      "translate(" + margin.left + "," + margin.top + ")");
            
            // Initialize the X axis
            var x = d3.scaleBand()
              .range([ 0, width ])
              .padding(0.2);
            var xAxis = svg.append("g")
              .attr("transform", "translate(0," + height + ")")
            
            // Initialize the Y axis
            var y = d3.scaleLinear()
              .range([ height, 0]);
            var yAxis = svg.append("g")
              .attr("class", "myYaxis")
            
            
            // A function that create / update the plot for a given variable:
            function update(selectedVar) {
            
              // Parse the Data
              d3.csv("https://raw.githubusercontent.com/CyChang325/Urban-Density-Research/master/test.csv", function(data) {
            
                // X axis
                x.domain(data.map(function(d) { return d.group; }))
                xAxis.transition().duration(1000).call(d3.axisBottom(x))
            
                // Add Y axis
                y.domain([0, d3.max(data, function(d) { return +d[selectedVar] }) ]);
                yAxis.transition().duration(1000).call(d3.axisLeft(y));
            
                // variable u: map data to existing bars
                var u = svg.selectAll("rect")
                  .data(data)
            
                // update bars
                u
                  .enter()
                  .append("rect")
                  .merge(u)
                  .transition()
                  .duration(1000)
                    .attr("x", function(d) { return x(d.group); })
                    .attr("y", function(d) { return y(d[selectedVar]); })
                    .attr("width", x.bandwidth())
                    .attr("height", function(d) { return height - y(d[selectedVar]); })
                    .attr("fill", "#ff547c")
              })
            
            }
            
            // Initialize plot
            update('var1')
            
            </script>




</body>
